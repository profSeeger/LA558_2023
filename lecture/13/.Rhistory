fillOpacity = 0.8)
map
map <- leaflet() %>%
setView(-97.5, 49.5, 9)  %>%
addTiles() %>%
addPolygons(data = vehicletype,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "105",
fillOpacity = 0.8)
map
map <- leaflet() %>%
setView(-97.5, 49.5, 9)  %>%
addTiles() %>%
addPolygons(data = vehicletype,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "5",
fillOpacity = 0.8)
map
# Add interactions
map <- leaflet() %>%
setView(-97.5, 49.5, 9)  %>%
addTiles() %>%
addPolygons(data = vehicletype,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "4",
fillOpacity = 0.8,
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE)
)
map
labels <- sprintf(
"<strong>%s</strong><br/>%g carusers",
vehicletype$COUNTY_NAM, vehicletype$count
) %>% lapply(htmltools::HTML)
longitude<- c(-93.362357, -94.723649, -94.19837)
latitude<- c(44.971331, 45.376846, 46.34936)
df <- data.frame(longitude, latitude)
#convert to spatial data frame
df_sf = st_as_sf(df, coords = c("longitude", "latitude"), crs = 4326)
map <- leaflet() %>%
setView(-97.5, 49.5, 9) %>%
addTiles() %>%
addMarkers(data = df_sf) %>%
#fitBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %>%
addPolygons(data = vehicletype,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "4",
fillOpacity = 0.8,
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "10px",
direction = "auto"))
map
bounds[1]
bounds <- vehicletype %>%
st_bbox() %>%
as.character()
fitBounds(map, bounds[1], bounds[2], bounds[3], bounds[4])
bounds[1]
map %>% addLegend(pal = pal, values = count, opacity = 0.7, title = "CarUsers",
position = "bottomright")
map %>% addLegend(pal = pal, values = count, opacity = 0.7, title = "CarUsers",
position = "bottomright")
bounds <- vehicletype %>%
st_bbox() %>%
as.character()
fitBounds(map, bounds[1], bounds[2], bounds[3], bounds[4])
bounds <- vehicletype %>%
st_bbox() %>%
as.character()
map <- leaflet() %>%
setView(-97.5, 49.5, 9) %>%
addTiles() %>%
addMarkers(data = df_sf) %>%
fitBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %>%
addPolygons(data = vehicletype,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "4",
fillOpacity = 0.8,
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "10px",
direction = "auto"))
map
map %>% addLegend(pal = pal, values = count, opacity = 0.7, title = "CarUsers",
position = "bottomright")
install.packages(c("tidycensus", "tidyverse"))
library(tidycensus)
library(tidyverse)
langList = c(
"Only English" = "C16001_002",
"Spanish" = "C16001_003",
"Chinese" = "C16001_021",
"Arabic" = "C16001_033"
)
iowa_income <- get_acs(
geography = "county",
variables = "B19013_001",
state = "IA",
year = 2021,
wide = TRUE,
geometry = FALSE
)
install.packages(c("tidycensus", "tidyverse"))
langList = c(
"Only English" = "C16001_002",
"Spanish" = "C16001_003",
"Chinese" = "C16001_021",
"Arabic" = "C16001_033"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = "B19013_001",
state = "IA",
year = 2021,
wide = TRUE,
geometry = FALSE
)
View(iowa_558Lang)
iowa_558Lang <- get_acs(
geography = "county",
variables = "B19013_001",
state = "IA",
year = 2021,
output = "wide",
geometry = FALSE
)
View(iowa_558Lang)
iowa_558Lang <- get_acs(
geography = "county",
variables = "B19013_001",
state = "IA",
output = "wide",
geometry = FALSE
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
output = "wide",
geometry = FALSE
)
View(iowa_558Lang)
install.packages(c("tidycensus", "tidyverse", "sf" ))
install.packages(c("tidycensus", "tidyverse", "sf"))
setwd("~/Library/CloudStorage/Box-Box/GitHub_Repos/profSeeger/LA558_2023/lecture/12")
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
output = "wide",
geometry = FALSE
)
st_write(iowa_558Lang, "iowa_558Lang.shp")
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
output = "wide",
geometry = TRUE
)
st_write(iowa_558Lang, "iowa_558Lang.shp")
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA"
)
View(iowa_558Lang)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
output = "wide",
geometry = TRUE
)
county = c(
"Boone","Story","Polk"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
cpunty = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
setwd("~/Library/CloudStorage/Box-Box/GitHub_Repos/profSeeger/LA558_2023/lecture/12")
st_write(iowa_558Lang, "iowa_558Lang2.shp")
View(iowa_558Lang)
install.packages(c("tidycensus", "tidyverse", "sf" ))
library(tidycensus)
library(tidyverse)
library(sf)
langList = c(
"Only English" = "C16001_002",
"Spanish" = "C16001_003",
"Chinese" = "C16001_021",
"Arabic" = "C16001_033"
)
county = c(
"Boone","Story","Polk"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang
install.packages(c("tidycensus", "tidyverse", "sf"))
View(iowa_558Lang)
plot(iowa_558Lang["Only EnglishE"])
county = c(
"Boone","Story","Polk","Marshall"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang
st_write(iowa_558Lang, "iowa_558Lang2.shp")
county = c(
"Boone","Story","Polk","Webster"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang
plot(iowa_558Lang["Only EnglishE"])
county = c(
"Boone","Story","Polk","Webster", "Hardin", "Hamilton", "Dallas"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
v21 <- load_variables(2021, "acs5", cache = TRUE)
View(v21)
langList = c(
"total" = "C16001_001",
"Only English" = "C16001_002",
"Spanish" = "C16001_003",
"Chinese" = "C16001_021",
"Arabic" = "C16001_033"
)
county = c(
"Boone","Story","Polk","Webster"
#, "Hardin", "Hamilton", "Dallas"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
iowa_558Lang
county = c(
"Boone","Story","Polk","Webster", "Hardin", "Hamilton", "Dallas"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
iowa_558Lang
langList = c(
"Total" = "C16001_001",
"Only English" = "C16001_002",
"Spanish" = "C16001_003",
"Chinese" = "C16001_021",
"Arabic" = "C16001_033"
)
county = c(
"Boone","Story","Polk","Webster", "Hardin", "Hamilton", "Dallas"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
iowa_558Lang
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
iowa_558Lang
iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
iowa_558Lang %>%
mutate(SpanishP = (SpanishE / TotalE))
iowa_558Lang
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
View(iowa_558Lang)
iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
iowa_558Lang = iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE)
iowa_558Lang
View(iowa_558Lang)
iowa_558Lang = iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE * 100)
iowa_558Lang
plot(iowa_558Lang["SpanishP"])
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang = iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE * 100)
iowa_558Lang
plot(iowa_558Lang["SpanishP"])
langList1 = c(
"Total" = "C16001_001",
"Spanish" = "C16001_003"
)
langList2 = c(
"Total" = "C16001_001",
"Chinese" = "C16001_021"
)
langList3 = c(
"Total" = "C16001_001",
"Arabic" = "C16001_033"
)
county = c(
"Boone","Story","Polk","Webster", "Hardin", "Hamilton", "Dallas"
)
spanish <- get_acs(
geography = "county",
variables = langList1,
state = "IA",
county = county,
output = "wide",
geometry = FALSE
)
View(spanish)
spanish <- get_acs(
geography = "county",
variables = langList1,
state = "IA",
output = "wide",
geometry = FALSE
)
View(spanish)
setwd("~/Library/CloudStorage/Box-Box/GitHub_Repos/profSeeger/LA558_2023/lecture/13")
langList1 = c(
"Total" = "C16001_001",
"Spanish" = "C16001_003"
)
langList2 = c(
"Total" = "C16001_001",
"Chinese" = "C16001_021"
)
langList3 = c(
"Total" = "C16001_001",
"Arabic" = "C16001_033"
)
Spanish <- get_acs(
geography = "county",
variables = langList1,
state = "IA",
output = "wide",
geometry = FALSE
)
Chinese <- get_acs(
geography = "county",
variables = langList2,
state = "IA",
output = "wide",
geometry = FALSE
)
Arabic <- get_acs(
geography = "county",
variables = langList3,
state = "IA",
output = "wide",
geometry = FALSE
)
write.csv(Spanish,file='Spanish.csv', row.names=TRUE)
write.csv(Chinese,file='Chinese.csv', row.names=TRUE)
write.csv(Arabic,file='Arabic.csv', row.names=TRUE)
langList = c(
"Total" = "C16001_001",
"Only English" = "C16001_002",
"Spanish" = "C16001_003",
"Chinese" = "C16001_021",
"Arabic" = "C16001_033"
)
county = c(
"Boone","Story","Polk","Webster", "Hardin", "Hamilton", "Dallas"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang = iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE * 100)
plot(iowa_558Lang["SpanishP"])
county = c(
"Boone","Story","Polk","Webster", "Hardin", "Hamilton", "Dallas", "Crawford"
)
iowa_558Lang <- get_acs(
geography = "county",
variables = langList,
state = "IA",
county = county,
output = "wide",
geometry = TRUE
)
iowa_558Lang = iowa_558Lang %>%
mutate(SpanishP = SpanishE / TotalE * 100)
iowa_558Lang
plot(iowa_558Lang["SpanishP"])
reticulate::repl_python()
